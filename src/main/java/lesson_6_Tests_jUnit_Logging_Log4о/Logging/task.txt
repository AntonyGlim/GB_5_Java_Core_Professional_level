1 Добавить в проект возможность отправлять личные сообщения в новом окне
2 Хранить список блокированных пользователей (Blacklist) в базе данных.
3 Отключение пользователь 120 сек
+ 4 Отображать дату и время в сообщениях и истории

1. Разобраться с кодом.
2. Добавить отключение неавторизованных пользователей по таймауту (120 сек. ждем после подключения клиента.
Если он не авторизовался за это время, закрываем соединение).